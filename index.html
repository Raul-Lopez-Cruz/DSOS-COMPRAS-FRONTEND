<!DOCTYPE html>
<html lang="es-419">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="/ico.png">
    <title>Compras</title>
    <!-- Bootstrap ICONS, CSS, JS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.1/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <!-- jQuery -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <link rel="stylesheet" href="compras.css">
</head>

<body class="bg-custom">
    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-sm navbar-dark nav-custom">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarToggler"
                aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarToggler">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="">Panel de compras</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled" href="vender.html">Base de datos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled">Documentación</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- CONTROL PANEL -->
    <div class="container-lg my-3 py-2 px-4" id="controlPanel">
        <div class="row">
            <div class="col-md-4 col-12 my-1">
                <div class="card d-flex text-center fg-custom align-items-center justify-content-center pb-4">
                    <div class="card-body">CONTROLES</div>
                    <div class="d-flex align-items-center justify-content-center">
                        <button type="button" class="btn btn-p-azul" id="btnAgregar" data-bs-toggle="modal"
                            data-bs-target="#modalAgregarProducto">Agregar</button>
                        <button type="button" class="ms-3 btn btn-s-azul" id="btnTEST"> Actualizar </button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-6 my-1">
                <div class="card text-center fg-custom pb-4">
                    <div class="card-body"> 
                        <d class="d-none d-sm-block">NÚMERO DE COMPRAS</d>
                        <d class="d-block d-sm-none">COMPRAS</d>
                    </div>
                    <icon class="fs-3 d-inline"><i class="px-1 bi bi-cart-check round-yellow"></i>
                        <p class="fs-3 d-inline color-amarillo" id="contadorCompras">0</p>
                    </icon>
                </div>
            </div>
            <div class="col-md-4 col-6 my-1">
                <div class="card text-center fg-custom pb-4">
                    <div class="card-body">
                        <d class="d-none d-sm-block">MONTO TOTAL</d>
                        <d class="d-block d-sm-none">TOTAL</d>
                        </div>
                    <icon class="fs-3 d-inline"><i class="px-1 bi bi-currency-dollar round-green"></i>
                        <p class="fs-3 d-inline color-verde" id="contadorTotal">0</p>
                    </icon>
                </div>
            </div>
        </div>
    </div>
    <!-- TABLE BODY -->
    <div class="container-lg table-responsive text-nowrap fg-custom py-3">
        <h5 class="">Tabla de compras</h5>
        <input class="form-control form-control-sm input-custom2 my-3" type="number" id="searchBar" placeholder="Filtrar por ID"
        oninput="this.value = this.value.replace(/[^0-9]/g, '').replace(/(\..*?)\..*/g, '$1');">
        <table class="table">
            <thead class="table-custom-title">
                <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Total</th>
                    <th scope="col">Fecha y hora</th>
                    <th scope="col">ID Cliente</th>
                    <th scope="col">ID Producto</th>
                    <th scope="col">Acciones</th>
                </tr>
            </thead>
            <tbody id="tablaCompras" class="table-custom-body">
            </tbody>
        </table>
    </div>
    <!-- FORM CREATE -->
    <div class="modal fade" id="modalAgregarProducto" tabindex="-1" role="dialog"
        aria-labelledby="modalAgregarProductoLabel" aria-hidden="true" data-bs-backdrop="static"
        data-bs-keyboard="false" aria-labelledby="staticBackdropLabel">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content fg-custom">
                <div class="modal-header">
                    <h3 class="modal-title" id="modalAgregarProductoLabel">Nuevo registro</h3>
                    <button type="button" class="btn btn-s-close" data-bs-dismiss="modal" aria-label="close">
                        <i class="bi bi-x-lg"></i>
                    </button>
                </div>
                <form id="create_Form" class="needs-validation" novalidate>
                    <div class="modal-body">
                        <div class="mb-4 position-relative">
                            <label for="totalCompra">Total</label>
                            <input type="number" class="form-control input-custom" id="create_input_total"
                                placeholder="Escribe el monto total de la compra" min="0" max="1000000" step="0.01"
                                required>
                            <div class="invalid-tooltip">
                                Introduce un valor (positivo, con o sin decimales).
                            </div>
                        </div>
                        <div class="mb-4 position-relative">
                            <label for="clienteCompra">ID del cliente</label>
                            <input type="number" class="form-control input-custom" id="create_input_client" min="1"
                                step="1" placeholder="Introduce el ID del cliente" maxlength="10" required>
                            <div class="invalid-tooltip">
                                Debe ser un número entero positivo.
                            </div>
                        </div>
                        <div class="mb-2 position-relative">
                            <label for="productoCompra">ID del producto</label>
                            <input type="number" class="form-control input-custom" id="create_input_product" min="1"
                                step="1" placeholder="Introduce el ID del producto" required>
                            <div class="invalid-tooltip">
                                Debe ser un número entero positivo.
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" id="create_ok" class="btn btn-s-verde">Guardar</button>
                        <button type="button" id="create_cancel" class="btn btn-s-amarillo"
                            data-bs-dismiss="modal">Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- FORM DELETE -->
    <div class="modal fade" id="modalConfirmarEliminar" tabindex="-1" role="dialog"
        aria-labelledby="modalConfirmarEliminarLabel" aria-hidden="true" data-bs-keyboard="false"
        aria-labelledby="staticBackdropLabel">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content fg-custom">
                <div class="modal-header">
                    <h3 class="modal-title" id="modalConfirmarEliminarLabel">Requiere confirmación</h3>
                    <button type="button" class="btn btn-s-close" data-bs-dismiss="modal" aria-label="close">
                        <i class="bi bi-x-lg"></i>
                    </button>
                </div>
                <form id="delete_Form">
                    <div class="modal-body">
                        <p class="lead">
                            ¿Desea eliminar el producto?
                        </p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-s-rojo" id="delete_ok">Eliminar</button>
                        <button type="button" class="btn btn-s-dark" id="delete_cancel"
                            data-bs-dismiss="modal">Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- FORM EDIT -->
    <div class="modal fade" id="modalEditarProducto" tabindex="-1" role="dialog"
        aria-labelledby="modalEditarProductoLabel" aria-hidden="true" data-bs-keyboard="false"
        aria-labelledby="staticBackdropLabel">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content fg-custom">
                <div class="modal-header">
                    <h3 class="modal-title" id="modalEditarProductoLabel">Editar compra</h3>
                    <button type="button" class="btn btn-s-close" data-bs-dismiss="modal" aria-label="close">
                        <i class="bi bi-x-lg"></i>
                    </button>
                </div>
                <form id="edit_Form" class="was-validated">
                    <div class="modal-body">

                        <small class="text-muted">Por cuestiones de integridad de la BD, no se permite editar el
                            ID</small>

                        <div class="form-floating mb-3">
                            <input type="number" class="form-control input-custom" id="edit_input_id" disabled="true"
                                required>
                            <label for="nombreProducto">ID de la compra</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="number" class="form-control input-custom" id="edit_input_total"
                                placeholder="Escribe el monto total de la compra" lang="es-419" min="0" max="1000000"
                                step="0.01" required>
                            <label for="nombreProducto">Total de la compra</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="datetime-local" class="form-control input-custom" id="edit_input_date"
                                min="2020-01-01T00:00" max="2030-12-31T23:59" step="60" required>
                            <label for="precioProducto">Fecha de la compra</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="number" class="form-control input-custom" id="edit_input_client"
                                placeholder="Escribe el ID del cliente (hasta 8 dígitos)" min="0" max="99999999"
                                step="1" required>
                            <label for="existenciaProducto">ID del cliente</label>
                        </div>
                        <div class="form-floating mb-3">
                            <input type="number" class="form-control input-custom" id="edit_input_product"
                                placeholder="Escribe ID del producto (hasta 8 dígitos)" min="0" max="99999999" step="1"
                                required>
                            <label for="precioProducto">ID del Producto</label>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" id="edit_ok" class="btn btn-s-verde">Guardar cambios</button>
                        <button type="button" id="edit_cancel" class="btn btn-s-amarillo"
                            data-bs-dismiss="modal">Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Scripts -->
    <script src="js/cliente_http.js" type="text/javascript"></script>
    <script src="js/func_compras.js" type="text/javascript"></script>
    <script src="js/dom_compras.js" type="text/javascript"></script>
</body>

</html>